if (TARGET bz2_static)
    add_library(ziplib::external_bzip2 ALIAS bz2_static)
elseif (TARGET bz2)
    add_library(ziplib::external_bzip2 ALIAS bz2)
else ()
    message(STATUS "ZipLib: Using bundled bzip2")
    cmake_policy(PUSH)
    cmake_policy(SET CMP0077 NEW) # option() honors normal variables.
    set(ENABLE_LIB_ONLY ON)
    set(ENABLE_STATIC_LIB ON)
    add_subdirectory(bzip2-master)
    cmake_policy(POP)
    add_library(ziplib::external_bzip2 ALIAS bz2_static)
endif ()
